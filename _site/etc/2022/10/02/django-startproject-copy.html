<!DOCTYPE html>
<html lang="en"><!--
  The Favicons for Web, Android, Microsoft, and iOS (iPhone and iPad) Apps
  Generated by: https://www.favicon-generator.org/
-->



<link rel="shortcut icon" href="/public/img/favicon.ico" type="image/x-icon">
<link rel="icon" href="/public/img/favicon.ico" type="image/x-icon">

<meta name='msapplication-config' content='/public/img/browserconfig.xml'> 
<meta name="msapplication-TileColor" content="#ffffff">
<meta name="msapplication-TileImage" content="/public/img/favicon.png">
<meta name="theme-color" content="#ffffff">
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">

	<link rel="alternate" href="https://kejdev.github.io/" hreflang="x-default">
	<link rel="alternate" href="https://kejdev.github.io/" hreflang="ko">
	
	<!-- tipuesearch -->
	<link rel="stylesheet" href="/assets/tipuesearch/css/tipuesearch.css">
	


	
	
	
		<script type="text/x-mathjax-config">
MathJax.Hub.Config({
    TeX: {
        equationNumbers: {
        autoNumber: "AMS"
        }
    },
    tex2jax: {
    inlineMath: [ ['$', '$'] ],
    displayMath: [ ['$$', '$$'] ],
    processEscapes: true,
    }
});
MathJax.Hub.Register.MessageHook("Math Processing Error",function (message) {
        alert("Math Processing Error: "+message[1]);
    });
MathJax.Hub.Register.MessageHook("TeX Jax - parse error",function (message) {
        alert("Math Processing Error: "+message[1]);
    });
</script>
<script type="text/javascript" async
    src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-MML-AM_CHTML">
</script>
	</head>
<style>@import url(/public/css/syntax/monokai.css);</style>
  <title>Eunji Kim</title>
  <!-- <link href="/public/css/bootstrap.min.css" rel="stylesheet"> -->

  <link href="/public/css/style.css" rel="stylesheet">
  <body>
  	<div class="container"> 
		<div class="sidebar">
			<div>
	<a href="/">
		<img src="/public/img/cat.jpg" class="cat_img" alt="cat" 
		style="width :96px; margin-left: auto; border-radius: 70%;
		overflow: hidden; object-fit: cover; margin-right: auto; display: block;">
	</a>
	<div class="sidebar-item sidebar-header">
		<div class='sidebar-brand'>
			<a href="/" style = "font-family: 'Gelasio'" >Eunji Kim</a>
		</div>
		<p class="lead" style="color: rgb(255, 255, 255);">ì–‘ë…ì¹˜í‚¨ğŸ— ì¢‹ì•„í•˜ëŠ” ê°œë°œì</p></div>
	<form action="/search" class="tipue_search_right">
		<div >
		<input type="text" name="q" id="tipue_search_input"
		placeholder="ê²€ìƒ‰ì–´ë¥¼ ì…ë ¥í•˜ì„¸ìš”
		pattern=".{1,}" title="At least 1 characters" required></div>
		<div style="clear: both;"></div>
	</form>
</div>

<div class="sidebar-item sidebar-nav" style="margin-right:8px; margin-top:20px">
	<ul class="nav">
	<li class="nav-title" style="color:rgb(255, 255, 255); font-weight:bold;">Pages</li>
	<li>
		<a class="nav-item" style="text-transform: capitalize; color:rgb(255, 255, 255);" href="/">Articles</a>
	</li>
	<li>
		<a class="nav-item" style="text-transform: capitalize; color:aliceblue;" href="/about">About</a>
	</li>
	<!-- 
	
		
	
		
			
				<li>
					<a class="nav-item" href="/about/" style="text-transform: capitalize;">
						About
					</a>
				</li>
			
		
	
		
			
		
	
		
	
		
	
		
			
				<li>
					<a class="nav-item" href="/search/" style="text-transform: capitalize;">
						Search
					</a>
				</li>
			
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	 -->
	</ul>
</div>

<div class="sidebar-item sidebar-nav">
	<ul class="nav">
			<li class="nav-title" style="color:rgb(255, 255, 255); font-weight:bold;">Category</li>
		
		<li>
			<a class="nav-item" style="color:aliceblue;" href="/category/#ETC">
				<span class="name">ETC</span>
				<span class="badge">9</span>
			</a>
		</li>
		
		<li>
			<a class="nav-item" style="color:aliceblue;" href="/category/#R">
				<span class="name">R</span>
				<span class="badge">22</span>
			</a>
		</li>
		
		<li>
			<a class="nav-item" style="color:aliceblue;" href="/category/#MachineLearning">
				<span class="name">MachineLearning</span>
				<span class="badge">25</span>
			</a>
		</li>
		
		<li>
			<a class="nav-item" style="color:aliceblue;" href="/category/#DB">
				<span class="name">DB</span>
				<span class="badge">5</span>
			</a>
		</li>
		
		<li>
			<a class="nav-item" style="color:aliceblue;" href="/category/#Python">
				<span class="name">Python</span>
				<span class="badge">35</span>
			</a>
		</li>
		
		<li>
			<a class="nav-item" style="color:aliceblue;" href="/category/#Algorithm">
				<span class="name">Algorithm</span>
				<span class="badge">21</span>
			</a>
		</li>
		
		<li>
			<a class="nav-item" style="color:aliceblue;" href="/category/#Go">
				<span class="name">Go</span>
				<span class="badge">8</span>
			</a>
		</li>
		
		<li>
			<a class="nav-item" style="color:aliceblue;" href="/category/#Paper">
				<span class="name">Paper</span>
				<span class="badge">6</span>
			</a>
		</li>
		
		<li>
			<a class="nav-item" style="color:aliceblue;" href="/category/#Docker">
				<span class="name">Docker</span>
				<span class="badge">1</span>
			</a>
		</li>
		
	</nav>
	</ul>
	
</div>

<div class="sidebar-item sidebar-footer">
	<p>Powered by <a href="https://github.com/jekyll/jekyll">Jekyll</a></p>
</div>
		</div>
	

		<div class="content-wrapper">
			<div class="content">
				<article class="post">
	<header class="post-header">
		<time class="post-date dt-published" datetime="2022-10-02T14:00:00+09:00" itemprop="datePublished">2022/10/02
		</time>		
		<div class="post-title"> 
			Pythoní™˜ê²½ OpenCV + CUDA Build í•˜ê¸°
		</div>
	</header>

	<div class="post-content">
		<p>ìµœê·¼ì— OpenCV Build í•˜ë©´ì„œ ë§ì´ í—¤ë§¸ëŠ”ë°, ì´ë²ˆ ê¸°íšŒì— OpenCVë¹Œë“œì— í•„ìš”í•œ ë‚´ìš©ì„ ì •ë¦¬í•´ë³¼ê¹Œí•œë‹¤.</p>

<h3 id="ì¤€ë¹„ì‚¬í•­">ì¤€ë¹„ì‚¬í•­</h3>

<ol>
  <li>OpenCV : <a href="https://github.com/opencv/opencv">https://github.com/opencv/opencv</a></li>
  <li>OpenCV Contrib : <a href="https://github.com/opencv/opencv_contrib">https://github.com/opencv/opencv_contrib</a></li>
  <li>CMake : <a href="https://cmake.org/download/">https://cmake.org/download/</a></li>
  <li>Visual Studio 2019 : <a href="https://learn.microsoft.com/ko-kr/visualstudio/releases/2019/release-notes">https://learn.microsoft.com/ko-kr/visualstudio</a></li>
</ol>

<h3 id="ê°€ìƒí™˜ê²½-êµ¬ì„±">ê°€ìƒí™˜ê²½ êµ¬ì„±</h3>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code># ê°€ìƒí™˜ê²½ ìƒì„± 
conda create --name ê°€ìƒí™˜ê²½ ì´ë¦„ python=3.7

# ê°€ìƒí™˜ê²½ í™œì„±í™”
conda activate ê°€ìƒí™˜ê²½ ì´ë¦„

conda install numpy
</code></pre></div></div>

<p>âœ” ì²´í¬ í•  ë¶€ë¶„</p>
<ul>
  <li>numpy ì„¤ì¹˜ í›„ ì˜ ë˜ëŠ”ì§€ í™•ì¸!</li>
  <li>cv2 ìˆëŠ”ì§€ í™•ì¸ í•  ê²ƒ. (cv2ê°€ ìˆìœ¼ë©´ ì•ˆë¨)</li>
</ul>

<p><img src="/public/img/opencv1.png" alt="opencv" /></p>

<h3 id="opencv--opencv-contrib">OpenCV &amp; OpenCV contrib</h3>

<p>opencvì™€ opencv contribë¥¼ zip í˜•íƒœë¡œ ë‹¤ìš´ë¡œë“œ í›„ Cë“œë¼ì´ë¸Œì— ì•„ë˜ì™€ ê°™ì´ í’€ì.</p>

<p><img src="/public/img/opencv2.png" alt="opencv2" /></p>

<p>ì €ëŠ” Cë“œë¼ì´ë¸Œ ë°‘ì— opencvgpu ë¼ëŠ” í´ë”ì— ë‹¤ìš´ ë°›ì€ í´ë”ë¥¼ í’€ì—ˆê³ , buildí•˜ê³  ìƒì„±ë˜ëŠ” íŒŒì¼ì„ ë‹´ê¸° ìœ„í•´ build íŒŒì¼ í•˜ë‚˜ ìƒì„±í–ˆë‹¤.</p>

<p>ê·¸ë¦¬ê³  ì„ íƒ ì‚¬í•­ì´ì§€ë§Œ, opencv contrib/modulesì•ˆì— ë³µë¶™ í›„ opencv/modules ì•ˆì— ë„£ìœ¼ë©´ CMake ë¹Œë“œí• ë•Œ ë”°ë¡œ ê²½ë¡œ ì„¤ì •ì„ ì•ˆí•´ë„ ëœë‹¤.</p>

<h3 id="cmake-build">CMake Build</h3>

<p><img src="/public/img/opencv3.png" alt="opencv3" /></p>

<p>CMakeì— Where is the source codeì—ëŠ” ì•„ê¹Œ ë‹¤ìš´ ë°›ì€ opencv í´ë” ê²½ë¡œ, ì•„ë˜ì—ëŠ” buildí´ë”ë¥¼ ë„£ëŠ”ë‹¤.</p>

<p><img src="/public/img/opencv4.png" alt="opencv4" /></p>

<p>ê·¸ë¦¬ê³  Configureë¥¼ ëˆ„ë¥´ë©´ ì•„ë˜ì™€ ê°™ì´ ì°½ì´ ëœ¨ë©´ ì•„ë˜ì™€ ê°™ì´ ì„¤ì • í›„ Finishë¥¼ ëˆ„ë¥¸ë‹¤.</p>

<ul>
  <li>OPENCV_DNN_CUDA = ON</li>
  <li>WITH_CUDA = ON</li>
  <li>BUILD_WITH_STATIC_CRT = OFF</li>
  <li>ENABLE_FAST_MATH = ON</li>
  <li>INSTALL_PYTHON_EXAMPLES = ON</li>
</ul>

<p>Configire ë¥¼ ëˆ„ë¥¸ë‹¤.</p>

<ul>
  <li>WITH_CUDNN = ON</li>
  <li>WITH_CUBLAS = ON</li>
  <li>CUDA_FAST_MATH = ON</li>
</ul>

<p>CUDA ARCH BINì€ <a href="https://en.wikipedia.org/wiki/CUDA">https://en.wikipedia.org/wiki/CUDA</a>ì—ì„œ ìì‹ ì˜ ê·¸ë˜í”½ì— ë§ëŠ¦
ë²ˆí˜¸ë¥¼ ì°¾ìœ¼ë©´ ëœë‹¤. ë‚˜ì˜ ê²½ìš°ëŠ” 3060 ê·¸ë˜í”½ì´ê¸° ë•Œë¬¸ì— 8.6ìœ¼ë¡œ í–ˆë‹¤.</p>

<ul>
  <li>CUDA_ARCH_BIN = 8.6</li>
</ul>

<p>ì•„ë˜ ê²½ë¡œëŠ” ì•„ê¹Œ ìƒì„±í–ˆë˜ ê°€ìƒí™˜ê²½ì„ ì•„ë˜ì²˜ëŸ¼ ë„£ì–´ì¤€ë‹¤.</p>

<ul>
  <li>PYTHON3_EXECUTABLE = C:/Users/ejkim/anaconda3/envs/opencv_gpu/python.exe</li>
  <li>PYTHON3_INCLUDE_DIR = C:/Users/ejkim/anaconda3/envs/opencv_gpu/include</li>
  <li>PYTHON3_LIBRARY = C:/Users/ejkim/anaconda3/envs/opencv_gpu/libs/python37.lib</li>
  <li>PYTHON3_LIBRARY_DEBUG = C:/Users/ejkim/anaconda3/envs/opencv_gpu/libs/python37.lib</li>
  <li>PYTHON3_NUMPY_INCLUDE_DIRS = C:/Users/ejkim/anaconda3/envs/opencv_gpu/Lib/site-packages/numpy/core/include</li>
  <li>PYTHON3_PACKAGES_PATH = C:/Users/ejkim/anaconda3/envs/opencv_gpu/Lib/site-packages</li>
  <li>BUILD_opencv_world = ON</li>
  <li>OPENCV_ENABLE_NONFREE = ON</li>
</ul>

<p>Configire ëˆ„ë¥¸ í›„ Generateë¥¼ ëˆ„ë¥¸ë‹¤.</p>

<p><img src="/public/img/opencv5.png" alt="opencv5" /></p>

<p>ê·¸ëŸ¼ ì´ë ‡ê²Œ build í´ë”ì— ì—¬ëŸ¬ íŒŒì¼ì´ ìƒì„±ë˜ëŠ”ë° ì—¬ê¸°ì„œ OpenCV.sinì„ ëˆŒëŸ¬ Visual Studio 2019ë¥¼ ì—°ë‹¤.</p>

<p><img src="/public/img/opencv6.png" alt="opencv6" /></p>

<p>Release, x64ë¡œ ì„¤ì •í•˜ê³  ALL_BUILDì—ì„œ ë¹Œë“œë¥¼ ëˆ„ë¥¸ë‹¤.</p>

<p><img src="/public/img/opencv7.png" alt="opencv7" /></p>

<p>ë¹Œë“œ ëë‚˜ë©´, ë‹¤ì‹œ INSTALL ìš°í´ë¦­ í›„ ë¹Œë“œ ëˆŒëŸ¬ì„œ ë¹Œë“œ í•œë‹¤.</p>

<p><img src="/public/img/opencv8.png" alt="opencv8" /></p>

<p>ë¹Œë“œê°€ ëë‚˜ë©´ ì•„ë˜ì™€ ê°™ì€ ê²½ë¡œì— í´ë”ê°€ ìƒê¸´ë‹¤.</p>

<p><img src="/public/img/opencv12.png" alt="opencv12" /></p>

<p>ë¹Œë“œê°€ ì˜ëœ ê²ƒì„ í™•ì¸ í–ˆìœ¼ë‹ˆ, ì•„ë˜ì™€ ê°™ì´ ê²½ë¡œë¥¼ ì¡ì•„ì¤€ë‹¤.</p>

<p><img src="/public/img/opencv10.png" alt="opencv10" /></p>

<p>ì‹œìŠ¤í…œ ë³€ìˆ˜ë¡œ ìœ„ì™€ ê°™ì´ ì¡ì•„ì£¼ê³ , Pathì— <code class="highlighter-rouge">%OPENCV_DIR%\x64\vc16\bin</code> ë¥¼ ì ì–´ ë„£ì–´ì¤€ë‹¤.</p>

<p><img src="/public/img/opencv11.png" alt="opencv11" /></p>

<p>ê·¸ë¦¬ê³  <code class="highlighter-rouge">cv2.cuda.getCudaEnabledDeviceCount()</code> ë¡œ GPUê°€ ì¡íˆëŠ”ì§€ í™•ì¸í•˜ë©´ ë! 
ë‚˜ëŠ” ê·¸ë˜í”½ ì¹´ë“œê°€ 1ê°œ ì„¤ì¹˜ë˜ì–´ ìˆì–´ì„œ 1ì´ ë‚˜ì˜¨ë‹¤.</p>

<p>ì•„ ê·¸ë¦¬ê³ !
í•˜ë‹¤ê°€ ì¤‘ê°„ì— <code class="highlighter-rouge">ImportError: OpenCV loader: missing configuration file: ['config-3.7.py', 'config-3.py']</code> ì™€ ê°™ì€ ì—ëŸ¬ë¥¼ ë§Œì•½ ë³´ê²Œ ëœë‹¤ë©´, íŒŒì´ì¬ ë²„ì „ì„ í™•ì¸í•´ë³´ì.</p>

<p>ë‚˜ì˜ ê²½ìš°ì—ëŠ” ê°€ìƒí™˜ê²½ ìƒì„± ì‹œì— Python 3.7ë¡œ ìƒì„±í–ˆëŠ”ë°, ì‹¤ì œ ë¹Œë“œí•˜ê³  ë‚˜ë‹ˆê¹Œ ì•„ë˜ì™€ ê°™ì´ íŒŒì´ì¬ 3.9ë¡œ ë¹Œë“œë˜ì–´ ìˆì—ˆë‹¤.</p>

<p><img src="/public/img/opencv9.png" alt="opencv9" /></p>

<p>ì´ë•Œ í•´ê²°ë²•ì€ ë‘ê°€ì§€ì¸ë°, ì²«ë²ˆì§¸ëŠ” ë‹¤ì‹œ ë°€ê³  ì²˜ìŒë¶€í„° ë¹Œë“œí•˜ê±°ë‚˜ ë‘ë²ˆì§¸ëŠ” íŒŒì´ì¬ 3.9ë¡œ ë¹Œë“œë˜ì–´ ìˆìœ¼ë‹ˆ, ê°€ìƒí™˜ê²½ íŒŒì´ì¬ ë²„ì „ë„ 3.9ë¡œ ë§ì¶°ì¤€ë‹¤.</p>

<p>ë‚˜ëŠ” ë‘ê°€ì§€ ë‹¤ í•´ë´¤ëŠ”ë°, ì²«ë²ˆì§¸ì˜ ê²½ìš°ì—ëŠ” ë°€ê³  ë‹¤ì‹œ ì²˜ìŒë¶€í„°ë¥¼ 3ë²ˆì •ë„ ë°˜ë³µí•˜ë‹ˆê¹Œâ€¦. ì˜ë˜ì—ˆê³ , ë‹¤ë¥¸ ì»´í“¨í„°ì— ë‹¤ì‹œ ë¹Œë“œ í–ˆì„ ë•ŒëŠ” ê·¸ëƒ¥ ê·€ì°®ì•„ì„œ íŒŒì´ì¬ ë²„ì „ì„ ë§ì¶°ì£¼ë‹ˆ ê¸ˆë°© ëë‚¬ë‹¤.</p>

<p>ê°€ìƒí™˜ê²½ íŒŒì´ì¬ ë²„ì „ì„ ë‹¤ì‹œ ë§ì¶œ ë•ŒëŠ” <code class="highlighter-rouge">conda install python==3.9</code> ë¼ê³  í•˜ë©´ ëë‚œë‹¤.</p>

	</div>
</article>

<div style="border-top: 1px solid #ccc;" > </div>
<script src="https://utteranc.es/client.js"
        repo="KEJdev/kejdev.github.io"
        issue-term="pathname"
        theme="github-light"
        crossorigin="anonymous"
        async>
</script>
			</div>
		</div>
	</div>
  </body>
</html>