---
layout: post
title: '[ì˜¤ëŠ˜ì˜ ì§‘ í´ë¡ ì½”ë”©] ê°„í¸ íšŒì›ê°€ì…, ìì²´ íšŒì›ê°€ì… Table ë§Œë“¤ê¸°'
date: 2024-01-13 00:00:00 +0000
category : Side Project
---

#### ğŸ¥• ìŠ¤í„°ë”” ì†Œê°œ 
í˜„ì¬ í•˜ê³  ìˆëŠ” [ìŠ¤í„°ë””(Meow Developer)](https://github.com/MeowDevelopers)ì—ì„œ ì˜¤ëŠ˜ì˜ ì§‘ í´ë¡  ì½”ë”©ì„ ì§„í–‰í•˜ê³  ìˆë‹¤. ì°¸ê³ ë¡œ "ê³ ì–‘ì´ì™€ ê°™ì€ ìœ ì—°í•¨ì„ ê°€ì§€ê³  ì‹¶ì€ ê°œë°œìë“¤" ì´ë¼ëŠ” ëœ»ì—ì„œ ìŠ¤í„°ë”” ì´ë¦„ì„ Meow Developerìœ¼ë¡œ ì§€ì—ˆë‹¤. ìš°ë¦¬ëŠ” ë²¡ì—”ë“œ ìŠ¤í„°ë””ì´ì§€ë§Œ, ë²¡ì—”ë“œ ê¸°ìˆ ë§Œì„ ë°°ìš°ê³  ëë‚´ëŠ” ê²ƒì´ ì•„ë‹Œ í¬ê´„ì ìœ¼ë¡œ ì—…ë¬´ë¥¼ í•˜ë©´ì„œ ê³ ë¯¼í–ˆë˜ ë¶€ë¶„ì´ë‚˜, ì‹œë„í•´ë³´ê³  ì‹¶ì—ˆë˜ ê¸°ìˆ ì´ë‚˜ ë§í•˜ê³  ì‹¶ì€ ì£¼ì œì— ëŒ€í•´ ìê¸°ì£¼ë„ì ìœ¼ë¡œ ì„œë¡œ ê³µìœ í•˜ëŠ” ìŠ¤í„°ë””ì´ë‹¤.   

<br>
í´ë¡  ì½”ë”©ì´ë¼ê³  í•˜ì§€ë§Œ, "ë‹¨ìˆœí•œ ê¸°ëŠ¥ì„ ë”°ë¼ ë§Œë“¤ê² ë‹¤." ë¼ê¸° ë³´ë‹¤ëŠ” í•´ë‹¹ ê¸°ëŠ¥ì„ ì™œ ì´ë ‡ê²Œ ê¸°íší–ˆê³  ì˜ë„í–ˆê³  êµ¬í˜„í–ˆëŠ”ì§€ì— ëŒ€í•´ ë¶„ì„í•˜ë©´ì„œ êµ¬ì¶•í•˜ê³  ìˆë‹¤.  

## ì˜¤ëŠ˜ì˜ ì§‘ íšŒì›ê°€ì… í˜ì´ì§€  

![today-house-1](/public/img/today-house-1.png)

ì˜¤ëŠ˜ì˜ ì§‘ íšŒì›ê°€ì…ì€ ìœ„ ì´ë¯¸ì§€ì™€ ê°™ì´ ë˜ì–´ ìˆë‹¤.  
ì´ë¯¸ì§€ë¥¼ ë³´ë©´ ì•Œê² ì§€ë§Œ ê°„í¸ íšŒì›ê°€ì…(ì†Œì…œ ë¡œê·¸ì¸)ê³¼ ìì²´ íšŒì›ê°€ì…ì„ ì§€ì›í•˜ëŠ” í˜•íƒœì´ë‹¤. ì˜¤ëŠ˜ì˜ ì§‘ì„ ì‚¬ìš©í•´ë³¸ ì‚¬ëŒì´ë¼ë©´ ì•Œê² ì§€ë§Œ, ì˜¤ëŠ˜ì˜ ì§‘ì˜ íšŒì›ê°€ì… ì •ì±…ì€ ì•„ë˜ì™€ ê°™ì´ í™•ì¸ë˜ì—ˆë‹¤. 


1. ì†Œì…œ ë¡œê·¸ì¸ 3ê°œ(ì¹´ì¹´ì˜¤, í˜ì´ìŠ¤ë¶, ë„¤ì´ë²„)ì™€ ìì²´ íšŒì›ê°€ì…ì€ ì´ë©”ì¼ë§Œ ë‹¤ë¥´ë‹¤ë©´, 1ëª… ìœ ì €ë‹¹ ì—¬ëŸ¬ê°œì˜ ê³„ì •ì„ ë§Œë“¤ ìˆ˜ ìˆë‹¤. 
2. ìì²´ íšŒì›ê°€ì…ì€ ë‹¤ë¥¸ ì´ë©”ì¼ì„ ì“°ë©´ ì¤‘ë³µ ê³„ì •ì„ ë³´ìœ í•  ìˆ˜ ìˆë‹¤. 
3. ê¸°ì¡´ ê³„ì •ì´ ìˆë‹¤ë©´ "ê¸°ì¡´ ê³„ì •ìœ¼ë¡œ ë¡œê·¸ì¸"ìœ¼ë¡œ ìœ ë„ í•˜ê±°ë‚˜ "ë‹¤ë¥¸ ë°©ì‹ìœ¼ë¡œ ê°€ì…"ìœ¼ë¡œ ì²˜ë¦¬í•œë‹¤. 

### íŠ¸ë ˆì´ë“œì˜¤í”„  

ì˜¤ëŠ˜ì˜ ì§‘ì˜ íšŒì›ê°€ì… ì •ì±…ì„ ë³´ë©´ ì¥ë‹¨ì ì´ ë¶„ëª…í•˜ê²Œ ë³´ì¸ë‹¤. ì•„ë˜ì™€ ê°™ì´ ìœ ì € ì‹œë‚˜ë¦¬ì˜¤ê°€ ìˆë‹¤ê³  ê°€ì •í•´ë³´ì.  

1. ìœ ì €ê°€ ë¬¼ê±´ì„ êµ¬ë§¤í•˜ê¸° ìœ„í•´ ì¹´ì¹´ì˜¤ ê°„í¸ íšŒì›ê°€ì…ì„ ì§„í–‰í•œë‹¤.  
2. ê°€êµ¬ë¥¼ êµ¬ë§¤í•œë‹¤.  
3. í¬ì¸íŠ¸ê°€ ìŒ“ì¸ë‹¤.  
4. ì‹œê°„ì´ ì¢€ íë¥´ê³  ë‹¤ì‹œ ê°€êµ¬ë¥¼ êµ¬ë§¤í•˜ëŸ¬ ë¡œê·¸ì¸ì„ ì‹œë„í•œë‹¤. 
5. ìœ ì €ê°€ ì¹´ì¹´ì˜¤ ê°„í¸ê°€ì…í•œ ë¶€ë¶„ì´ ìƒê°ì´ ì•ˆë‚˜ ë„¤ì´ë²„ ê°„í¸ ê°€ì…ì„ ëˆ„ë¥¸ë‹¤.  
6. ìœ ì €ëŠ” ì¹´ì¹´ì˜¤ì™€ ë„¤ì´ë²„ 2ê°œì˜ ì¤‘ë³µ ê³„ì •ì´ ìƒê¸´ë‹¤.  
7. ìœ ì €ëŠ” ì˜ë¬¸ì ì„ ê°€ì§„ë‹¤. ë‚´ê°€ ì´ì „ì— ê°€ì…í•œ ê°€êµ¬ë‚´ì—­ì´ë‘ í¬ì¸íŠ¸ëŠ” ì–´ë””ìˆì„ê¹Œ?  
8. ìœ ì €ëŠ” ë¬¸ì˜ë¥¼ ë‚¨ê²¨ì„œ ê°€êµ¬ ë‚´ì—­ê³¼ í¬ì¸íŠ¸ë¥¼ ë¬¸ì˜í•œë‹¤.  
9. ìƒë‹´ì‚¬ ë¦¬ì†ŒìŠ¤ë¥¼ ì¨ê°€ë©° ìœ ì €ì—ê²Œ ë‹µë³€ê³¼ í•¨ê»˜ ê³„ì •ì´ ì¤‘ë³µì¸ê±¸ë¡œ í™•ì¸ëœë‹¤ê³  ì•Œë ¤ì¤€ë‹¤.  


ë§ì€ ì‚¬ìš©ìë“¤ì´ ìì‹ ì˜ ê³„ì • ì •ë³´ë¥¼ ìŠì–´ë²„ë¦¬ëŠ” ê²½ìš°ê°€ ë§ê³ , ì´ì™€ ê´€ë ¨í•˜ì—¬ ë¬¸ì˜ë¥¼ í•´ì˜¤ëŠ” ê²½ìš°ê°€ ì¦ë‹¤. ì¤‘ë³µ ê³„ì • ê¸°ëŠ¥ì„ ë„ì…í•˜ë©´ ì‚¬ìš©ì í¸ì˜ì„±ì´ ì¦ê°€í•  ìˆ˜ ìˆì§€ë§Œ, ì´ë¡œ ì¸í•´ ìƒë‹´ ì§ì›ì´ ì¶”ê°€ì ì¸ ë¦¬ì†ŒìŠ¤ë¥¼ íˆ¬ì…í•´ì•¼ í•˜ëŠ” íŠ¸ë ˆì´ë“œì˜¤í”„ê°€ ì¡´ì¬í•œë‹¤. ë˜í•œ ì´ëŸ¬í•œ ë¬¸ì˜ë‚˜ ìœ ì €ì˜ ì‹œê°„ íˆ¬ìëŠ” ì„œë¹„ìŠ¤ ì´ìš©ì— ëŒ€í•œ ë¶€ì •ì ì¸ ì˜í–¥ì„ ì£¼ê¸° ë•Œë¬¸ì— ì ì ˆí•œ ì¡°ì¹˜ê°€ í•„ìš”í•˜ë‹¤.

<br>  

ì¤‘ë³µ ê°€ì…ì„ ë°©ì§€í•˜ê³  ê°€ì… ìˆ˜ë‹¨ì„ ì—¬ëŸ¬ê°œ ë„£ìœ¼ëŸ¬ë©´ ì–´ë–»ê²Œ í•´ì•¼ë ê¹Œ ?  
ì£¼ë¡œ ì‚¬ìš©í•˜ëŠ” ë°©ë²•ì€ ì „í™”ë²ˆí˜¸ ì¸ì¦ì´ ìˆë‹¤. CIê°’ì€ ê³ ìœ í•˜ê¸° ë•Œë¬¸ì— ì‚¬ìš©í•  ìˆ˜ ìˆê² ì§€ë§Œ, CIê°’ì„ íšë“í•˜ëŠ” ì ˆì°¨ê°€ ìœ ì € í¸ì˜ì„±ì„ í•´ì¹˜ê¸° ë•Œë¬¸ì— ì¢‹ì€ ë°©ì‹ì´ ë§ëŠ”ê°€ì— ëŒ€í•´ ìƒê°í•´ë³´ê²Œ ëœë‹¤.  

## ìœ ì € í…Œì´ë¸” 

í˜„ì¬ êµ¬í˜„ëœ ìœ ì € í…Œì´ë¸”v1ì€ ì•„ë˜ì™€ ê°™ë‹¤.  

```sql
DROP TABLE IF EXISTS user;
CREATE TABLE user
(
	user_id 		bigint unsigned NOT NULL PRIMARY KEY AUTO_INCREMENT COMMENT 'ì•„ì´ë””',
	user_email 		varchar(100) NULL UNIQUE COMMENT 'ì´ë©”ì¼',
	user_profile            longtext NULL COMMENT 'ìœ ì € í”„ë¡œí•„ ì´ë¯¸ì§€',
	user_password  		varchar(255) NULL COMMENT 'íŒ¨ìŠ¤ì›Œë“œ',
	user_type               varchar(30) NOT NULL default 'user' COMMENT 'ì‚¬ìš©ì íƒ€ì…(ì‚¬ìš©ì, ê´€ë¦¬ì)',
	user_nickname 		varchar(30) NOT NULL UNIQUE COMMENT 'ìœ ì € ë‹‰ë„¤ì„',
	provider_type           varchar(30) NOT NULL COMMENT 'ë¡œê·¸ì¸ íƒ€ì…(KAKAO, NAVER, Facebook, Origin)',
	provider_key            varchar(255) NOT NULL UNIQUE COMMENT 'ë¡œê·¸ì¸ íƒ€ì…ì— ë”°ë¥¸ ì‹ë³„ê°’',
	created_at 		datetime NOT NULL COMMENT 'ìœ ì € íšŒì›ê°€ì… ìƒì„±ì¼',
	modified_at             datetime NOT NULL ON UPDATE CURRENT_TIMESTAMP COMMENT 'ìœ ì € ì •ë³´ ìˆ˜ì •ì¼',
	user_last_login_date    datetime NOT NULL COMMENT 'ìœ ì € ë§ˆì§€ë§‰ ë¡œê·¸ì¸ ì¼ì',
	deleted                 boolean NOT NULL default false COMMENT 'íšŒì›íƒˆí‡´ ì—¬ë¶€',
	dormancy	        boolean NOT NULL default false COMMENT 'ìœ ì € íœ´ë©´ ì—¬ë¶€',
	INDEX idx_email (user_email) COMMENT 'ìœ ì € ì´ë©”ì¼ ì¸ë±ì‹±',
	INDEX idx_nickname (user_nickname) COMMENT 'ìœ ì € ë‹‰ë„¤ì„ ì¸ë±ì‹±',
	INDEX idx_provider_key (provider_key) COMMENT 'ìœ ì € ì‹ë³„ê°’'
) ENGINE = InnoDB
DEFAULT CHARSET = utf8mb4
COMMENT = 'ìœ ì € í…Œì´ë¸”';
```

ì•„ì§ ë„£ì–´ì•¼ í•  ë¶€ë¶„ë„ ë§ê³  ì¼ë‹¨ ìì²´ íšŒì›ê°€ì… ê¸°ì¤€ìœ¼ë¡œ ë§Œë“¤ì—ˆê¸° ë•Œë¬¸ì— ê°œë°œí•˜ë©´ì„œ ìˆ˜ì •ì€ ë§ì´ í•  ê²ƒ ê°™ë‹¤. ì°¸ê³ ë¡œ user emailë¶€ë¶„ì€ ì†Œì…œ ë¡œê·¸ì¸ ë™ì˜í•­ëª©ì—ì„œ í˜„ì¬ ê°•ì œë¡œ ì´ë©”ì¼ì„ ë°›ì„ ìˆ˜ ì—†ëŠ” ìƒí™©ì´ê¸°ì— null í—ˆìš©ìœ¼ë¡œ ìˆ˜ì •í–ˆë‹¤. ã… ã…  

### User Domain

```java
package com.example.be_study.service.user.domain;

import com.example.be_study.service.base.AbstractBaseUserDeleteEntity;
import com.example.be_study.service.user.enums.ProviderType;
import com.example.be_study.service.user.enums.UserType;
import jakarta.persistence.*;
import lombok.Builder;
import lombok.Getter;
import lombok.NoArgsConstructor;
import lombok.Setter;

@Setter
@Getter
@Entity
@Table(name = "user")
@NoArgsConstructor
public class User extends AbstractBaseUserDeleteEntity {
    @AttributeOverride(name = "id", column = @Column(name = "user_id"))

    @Column(name = "user_profile", nullable = true)
    private String userProfile;

    @Column(name = "user_email", nullable = true)
    private String userEmail;

    @Column(name = "user_password", nullable = true)
    private String userPassword;

    @Enumerated(EnumType.STRING)
    @Column(name = "user_type", nullable = false)
    private UserType userType;

    @Column(name = "user_nickname", nullable = false)
    private String userNickName;

    @Enumerated(EnumType.STRING)
    @Column(name = "provider_type", nullable = false)
    private ProviderType providerType;

    @Column(name = "provider_key", nullable = false)
    private String providerKey;

    @Column(name = "user_last_login_date", nullable = false)
    private String userLastLoginDate;

    @Column(name = "dormancy", nullable = false, columnDefinition = "boolean default false")
    private Boolean dormancy;


    @Builder
    public User(String userProfile,
                String userEmail,
                String userPassword,
                UserType userType,
                String userNickName,
                ProviderType providerType,
                String providerKey,
                String userLastLoginDate,
                Boolean dormancy
    ) {
        this.userProfile = userProfile;
        this.userEmail = userEmail;
        this.userPassword = userPassword;
        this.userType = userType;
        this.userNickName = userNickName;
        this.providerType = providerType;
        this.providerKey = providerKey;
        this.userLastLoginDate = userLastLoginDate;
        this.dormancy = dormancy;
    }

    public static User ofKakao() {
        return User.builder()
                .build();

    }

    public static User ofOrigin() {
        return User.builder()
                .build();

    }

}
```
